# Hyper-Development Agency Site — production
# Домен: hyper-development.ru | Порт на VPS: 8085 (frontend), 8086 (order-api)
# Деплой: git pull && docker compose build && docker compose up -d
# Env для order-api на VPS: TELEGRAM_BOT_TOKEN (обязательно), TELEGRAM_CHAT_ID (опционально)

services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    image: hyper_development-frontend
    container_name: hyper_development-frontend
    restart: unless-stopped
    ports:
      - "8085:80"
    healthcheck:
      test: ["CMD", "wget", "-q", "-O", "/dev/null", "http://127.0.0.1:80/health"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s

  order-api:
    build:
      context: ./api
      dockerfile: Dockerfile
    image: hyper_development-order-api
    container_name: hyper_development-order-api
    restart: unless-stopped
    ports:
      - "8086:3000"
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - TELEGRAM_CHAT_ID=${TELEGRAM_CHAT_ID:-219800788}
